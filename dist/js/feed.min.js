/*! sdhm-event-feed v2.0.0 | (c) 2020 San Diego House Music | MIT License | https://github.com/djmisha/event-feed */
var todaysDate=Date.now(),theFeed=document.getElementById("evenfeed"),eventData=[],imageData=[];function requestImagesXHR(){var e=new XMLHttpRequest;e.open("GET","images.json"),e.send(),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status&&(!(function(e){for(var t=0;t<e.length;t++){var a={url:e[t].url,id:e[t].id};imageData.push(a)}})(JSON.parse(e.responseText)),matchImageswithEvents(imageData))}}function requestEventsXHR(){var e=new XMLHttpRequest,t="https://edmtrain.com/api/events?locationIds=81&client="+config.apiKey;e.open("GET",t),e.send(),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status&&(!(function(e){for(var t=0;t<e.data.length;t++){Date.parse(e.data[t].date);var a=new Date(e.data[t].date),n=new Date(e.data[t].date).toDateString(),s={id:e.data[t].id,name:e.data[t].name,date:n,link:e.data[t].link,venuename:e.data[t].venue.name,venueaddress:e.data[t].venue.address,venuecity:e.data[t].venue.location,venuestate:e.data[t].venue.state,artist:[e.data[t].artistList],image:"",schemadate:a};eventData.push(s)}})(JSON.parse(e.responseText)),attachToPage())}}function attachToPage(){var e,t,a,n,s;new Blazy({});for(var i=0;i<eventData.length;i++){var r=document.createElement("div");r.classList.add("single-event"),r.setAttribute("itemscope",""),r.setAttribute("itemtype","http://schema.org/Event"),r.innerHTML=(e=eventData[i],t=void 0,a=void 0,n=void 0,s=void 0,t=e.id,a=matchImageswithEvents(imageData,t),n=listArtists(e),s=checkEventName(e),'<div class="event-date" itemprop="startDate" content="'+e.schemadate+'">'+e.date+"</div> \n<a href="+e.link+' target=_blank><div class="event-image b-lazy" data-src="'+a+'"></div></a> \n<div class="event-title" itemprop="name">'+s+'</div> \n<div class="event-artist" itemprop="name">'+n+'</div> \n<div class="event-venue" itemprop="location" itemscope itemtype="http://schema.org/Place"><a href="https://www.google.com/maps/search/'+e.venuename+" "+e.venueaddress+'" target=_blank><span itemprop="name">'+e.venuename+'</span></a> \n<div class="event-location" itemscope itemtype="http://schema.org/PostalAddress"  itemprop="address" content="'+e.venueaddress+'"><a href="https://www.google.com/maps/search/'+e.venuename+" "+e.venueaddress+'" target=_blank><span>'+e.venueaddress+'</span></div></div> \n<div class="event-link"><a href='+e.link+' target="_blank">Learn More</a></div> \n'),theFeed.appendChild(r)}}function listArtists(e){var t=[];for(a=0;a<e.artist.length;a++){for(b=0;b<e.artist[a].length;b++){var n='<div class="artist artist-'+b+'"><a href="'+e.artist[a][b].link+'" target="_blank">'+e.artist[a][b].name+"</a>&nbsp;</div>";t.push(n)}return t}}function checkEventName(e){return!1==!e.name?e.name:""}function matchImageswithEvents(e,t){for(i=0;i<e.length;i++)if(t===e[i].id)return artistImage=e[i].url,artistImage}theFeed&&(requestImagesXHR(),requestEventsXHR());